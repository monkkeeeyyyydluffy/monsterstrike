<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exp Calculator Tool</title>
    <script>
      // inline to prevent state flashing
      if (
        localStorage.theme === 'dark' ||
        (!('theme' in localStorage) &&
          window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
      }
    </script>
    <script src="../../assets/js/themeToggle.js"></script>
  </head>
  <body
    class="bg-gray-100 p-6 font-sans text-gray-800 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-100"
  >
    <button
      id="themeToggle"
      class="fixed top-4 right-4 z-50 rounded-full bg-gray-200 p-3 text-gray-800 shadow-lg transition-colors duration-300 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600"
      aria-label="Toggle Dark Mode"
    >
      <!-- Sun Icon -->
      <svg
        id="iconLight"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="h-6 w-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 3v1.5m0 15V21m9-9h-1.5M4.5 12H3m16.95-6.95l-1.061 1.061M6.111 17.889l-1.061 1.061m13.9 0l-1.061-1.061M6.111 6.111 5.05 5.05M12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z"
        />
      </svg>

      <!-- Moon Icon -->
      <svg
        id="iconDark"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="hidden h-6 w-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M21.752 15.002A9.718 9.718 0 0112.75 21C7.477 21 3.25 16.523 3.25 11.25c0-3.089 1.5-5.843 3.977-7.5a.75.75 0 01.987.987 7.5 7.5 0 0010.289 10.29.75.75 0 01.986.975z"
        />
      </svg>
    </button>

    <!-- Go Back Button -->
    <a
      href="../../../index.html"
      class="fixed top-4 right-16 z-50 mr-1 rounded-full bg-gray-200 p-3 text-gray-800 shadow-lg transition-colors duration-300 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600"
      aria-label="Go Back Home"
    >
      <!-- Left Arrow Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="h-6 w-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M15.75 19.5L8.25 12l7.5-7.5"
        />
      </svg>
    </a>
    <div
      class="mx-auto max-w-lg rounded-md bg-white p-6 shadow-md transition-colors duration-300 dark:bg-gray-800"
    >
      <h2 class="mb-4 text-2xl font-semibold text-gray-800 dark:text-gray-100">
        Exp Calculator Tool
      </h2>

      <form id="calculationForm" class="space-y-4">
        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label
            class="w-40 text-left font-bold text-gray-700 dark:text-gray-300"
            >Genius Berry</label
          >
          <div class="flex flex-wrap gap-x-4 gap-y-2">
            <div class="flex items-center">
              <input
                type="radio"
                id="row1Option1"
                name="row1"
                value="1.5"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row1Option1"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >S (+50%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row1Option2"
                name="row1"
                value="1.55"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row1Option2"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >S+ (+55%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row1Option3"
                name="row1"
                value="1.6"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row1Option3"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >S++ (+60%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row1Option4"
                name="row1"
                value="1.65"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
                checked
              />
              <label
                for="row1Option4"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >EL (+65%)</label
              >
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label class="w-40 text-left text-gray-700 dark:text-gray-300"
            >Bell or 2x EXP event:</label
          >
          <div class="flex flex-wrap gap-x-4 gap-y-2">
            <div class="flex items-center">
              <input
                type="radio"
                id="row2Option1"
                name="row2"
                value="3"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
                checked
              />
              <label
                for="row2Option1"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >3x Bell</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row2Option2"
                name="row2"
                value="2"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row2Option2"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >2x event</label
              >
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label
            class="w-40 text-left font-bold text-gray-700 dark:text-gray-300"
            >Monspot:</label
          >
          <div class="flex flex-wrap gap-x-4 gap-y-2">
            <div class="flex items-center">
              <input
                type="radio"
                id="row3Option1"
                name="row3"
                value="1.5"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row3Option1"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >exp spot (+50%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row3Option2"
                name="row3"
                value="1.75"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
                checked
              />
              <label
                for="row3Option2"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >exp+ spot (+75%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row3Option3"
                name="row3"
                value="1"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row3Option3"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >no spot</label
              >
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label
            class="w-40 text-left font-bold text-gray-700 dark:text-gray-300"
            >Seele:</label
          >
          <div class="flex items-center">
            <div class="mr-4 flex items-center">
              <input
                type="radio"
                id="row4Option1"
                name="row4"
                value="1.5"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
                checked
              />
              <label
                for="row4Option1"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >ML Seele (+50%)</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row4Option2"
                name="row4"
                value="custom"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onchange="toggleCustomInput(); calculateProduct();"
              />
              <label
                for="row4Option2"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >Enter Value (NOT ML):</label
              >
              <div id="customTextInputContainer" class="ml-2">
                <input
                  type="number"
                  id="customTextInput"
                  class="form-input w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                  onchange="calculateProduct()"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label
            for="comboBox"
            class="w-40 text-left font-bold text-gray-700 dark:text-gray-300"
            >Lucky Bonus (675ML reward):</label
          >
          <select
            id="comboBox"
            class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-800 shadow-sm transition-colors duration-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none sm:w-auto sm:text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"
            onchange="calculateProduct()"
          >
            <option value="1" selected>1 No ML bonus</option>
            <option value="1.01">1.01 (550 MLs)</option>
            <option value="1.02">1.02 (575 MLs)</option>
            <option value="1.03">1.03 (625 MLs)</option>
            <option value="1.04">1.04 (650 MLs)</option>
            <option value="1.05">1.05 (675 MLs)</option>
          </select>
        </div>

        <div class="flex flex-wrap items-start gap-2 sm:items-center">
          <label
            class="w-40 text-left font-bold text-gray-700 dark:text-gray-300"
            >Monpass multi:</label
          >
          <div class="flex flex-wrap gap-x-4 gap-y-2">
            <div class="flex items-center">
              <input
                type="radio"
                id="row6Option1"
                name="row6"
                value="1"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
                checked
              />
              <label
                for="row6Option1"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >No monpass/playing solo</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="radio"
                id="row6Option2"
                name="row6"
                value="1.05"
                class="form-radio h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"
                onclick="calculateProduct()"
              />
              <label
                for="row6Option2"
                class="ml-2 text-gray-700 dark:text-gray-300"
                >monpass/playing coop (+5%)</label
              >
            </div>
          </div>
        </div>
      </form>

      <h3 class="mt-6 text-xl font-semibold text-gray-800 dark:text-gray-100">
        Results
      </h3>
      <p id="actualMultiplier" class="text-gray-700 dark:text-gray-300">
        <span class="font-semibold">Actual Multiplier:</span>
      </p>
      <p id="shownMultiplier" class="text-gray-700 dark:text-gray-300">
        <span class="font-semibold">Shown Multiplier:</span>
      </p>
      <p id="expPerRun" class="text-gray-700 dark:text-gray-300">
        <span class="font-semibold">Exp per run:</span>
      </p>
      <p id="expPerBonus" class="text-gray-700 dark:text-gray-300">
        <span class="font-semibold">Exp per highest bonus:</span>
      </p>
    </div>

    <script>
      function toggleCustomInput() {
        const customTextInputContainer = document.getElementById(
          'customTextInputContainer',
        )
        const row4Radio = document.getElementById('row4Option2')
        customTextInputContainer.style.display = row4Radio.checked
          ? 'inline-flex'
          : 'none'
      }

      function calculateProduct() {
        let product = 1
        let shownproduct = 1
        let expperrun = 40000
        let expperbonus = 700000

        // Row 1
        const row1Selected = document.querySelector(
          'input[name="row1"]:checked',
        )
        if (row1Selected) product *= parseFloat(row1Selected.value)
        else product = NaN

        // Row 2
        const row2Selected = document.querySelector(
          'input[name="row2"]:checked',
        )
        if (row2Selected) product *= parseFloat(row2Selected.value)
        else product = NaN

        // Row 3
        const row3Selected = document.querySelector(
          'input[name="row3"]:checked',
        )
        if (row3Selected) product *= parseFloat(row3Selected.value)
        else product = NaN

        // Row 4 (Two Radio Buttons, Second with Text Input)
        const row4Option1Selected =
          document.getElementById('row4Option1').checked
        const customInputValue =
          document.getElementById('customTextInput').value
        let row4Value
        if (row4Option1Selected) {
          row4Value = parseFloat(document.getElementById('row4Option1').value)
        } else if (document.getElementById('row4Option2').checked) {
          const customNumber = parseFloat(customInputValue)
          if (!isNaN(customNumber)) {
            row4Value = customNumber
          } else {
            row4Value = NaN
          }
        } else {
          row4Value = NaN
        }
        if (!isNaN(row4Value)) product *= row4Value
        else product = NaN

        shownproduct = product
        // Row 5 (Combobox)
        const comboBox = document.getElementById('comboBox')
        const selectedComboBoxValue = comboBox.value
        product *= parseFloat(selectedComboBoxValue)

        // Row 6
        const row6Selected = document.querySelector(
          'input[name="row6"]:checked',
        )
        if (row6Selected) product *= parseFloat(row6Selected.value)
        else product = NaN

        if (!isNaN(product)) {
          const formattedProduct = product.toLocaleString('en-US', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
          const formattedShownProduct = shownproduct.toLocaleString('en-US', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })

          expperrun = expperrun * product
          expperbonus = expperbonus * product
          const formattedexpperrun = expperrun.toLocaleString('en-US', {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
          })
          const formattedexpperbonus = expperbonus.toLocaleString('en-US', {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
          })

          document.getElementById('actualMultiplier').textContent =
            'Actual Multiplier: ' + formattedProduct
          document.getElementById('shownMultiplier').textContent =
            'Shown Multiplier: ' + formattedShownProduct
          document.getElementById('expPerRun').textContent =
            'Exp per run: ' + formattedexpperrun
          document.getElementById('expPerBonus').textContent =
            'Exp per highest bonus: ' + formattedexpperbonus
        } else {
          document.getElementById('actualMultiplier').textContent =
            'Please select/enter a value in each row.'
          document.getElementById('shownMultiplier').textContent = ''
          document.getElementById('expPerRun').textContent = ''
          document.getElementById('expPerBonus').textContent = ''
        }
      }

      // Initial setup: hide the text input and calculate
      document.addEventListener('DOMContentLoaded', function () {
        toggleCustomInput()
        calculateProduct()
      })
    </script>
  </body>
</html>
